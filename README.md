# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É PWA-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–û–ø—Ä–æ—Å–Ω–∏–∫ –ø–∞—Ü–∏–µ–Ω—Ç–∞"

**–†–æ–ª—å:** Senior Fullstack Developer / System Architect  
**–ó–∞–¥–∞—á–∞:** –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –∞–Ω–∞–º–Ω–µ–∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤.  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ SPA (Single Page Application) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–∫ PWA. –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ CRM –ë–∏—Ç—Ä–∏–∫—Å24.

---

## üÜï –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ (v1.1.0)

### ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üìã **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–æ–≤** –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º
- üìÑ **–≠–∫—Å–ø–æ—Ä—Ç –≤ PDF** ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ, –≥–æ—Ç–æ–≤–æ –¥–ª—è –ø–µ—á–∞—Ç–∏
- üìù **–≠–∫—Å–ø–æ—Ä—Ç –≤ TXT** ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- üé® **–ß–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
docker compose down
docker compose build backend
docker compose up -d

# –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
http://localhost:8000/admin
# ‚Üí –°–µ—Å—Å–∏–∏ –æ–ø—Ä–æ—Å–æ–≤ ‚Üí –ö–Ω–æ–ø–∫–∏: –ü—Ä–æ—Å–º–æ—Ç—Ä | PDF | TXT
```

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —ç–∫—Å–ø–æ—Ä—Ç—É –æ—Ç—á—ë—Ç–æ–≤](EXPORT_REPORTS.md)
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](DEPLOYMENT_UPDATE.md)
- [–ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞](QUICKSTART_EXPORT.md)

---

## 1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (Tech Stack)

–í—ã–±—Ä–∞–Ω–Ω—ã–π —Å—Ç–µ–∫ –¥–æ–ª–∂–µ–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Google Lighthouse > 90), –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å.

### 1.1 Frontend (Client Side)
- **Framework:** React 18+. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ Hooks.
- **Build Tool:** Vite. –î–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –∏ HMR (Hot Module Replacement).
- **Language:** TypeScript. –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–∞–Ω–Ω—ã—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–ø—Ä–æ—Å–Ω–∏–∫–∞).
- **Routing:** React Router v6. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ query-params –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
- **State Management:** Zustand –∏–ª–∏ Redux Toolkit. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤.
- **UI/Styling:** Tailwind CSS. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ utility-first –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–∏ (Mobile First –ø–æ–¥—Ö–æ–¥).
- **Animations:** Framer Motion. –î–ª—è –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏ (Page Transitions) –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (Micro-interactions).
- **PWA:** vite-plugin-pwa. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ manifest.json –∏ Service Workers –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω-–¥–æ—Å—Ç—É–ø–∞ (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏).

### 1.2 Backend (Server Side)
- **Language/Framework:** Python 3.10+ / FastAPI. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (ASGI), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Swagger/OpenAPI).
- **Data Validation:** Pydantic. –°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
- **ORM:** SQLAlchemy (Async) –∏–ª–∏ Tortoise ORM.
- **Server:** Uvicorn (–∑–∞–ø—É—Å–∫ –∑–∞ –ø—Ä–æ–∫—Å–∏ Nginx).

### 1.3 Database & Storage
- **Primary DB:** PostgreSQL. –•—Ä–∞–Ω–µ–Ω–∏–µ: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ª–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
- **Cache/Session:** Redis. –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π, –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (TTL —Å–µ—Å—Å–∏–∏ = –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞), rate limiting.

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–æ—Å–∞ (Survey Engine)

–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ –¥–≤–∏–∂–æ–∫, —Ä–µ–Ω–¥–µ—Ä—è—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥—è—â–µ–≥–æ JSON-–∫–æ–Ω—Ñ–∏–≥–∞.

### 2.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON-—Å—Ü–µ–Ω–∞—Ä–∏—è (Data Model)
–û–ø—Ä–æ—Å–Ω–∏–∫ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—Å—è –≤ –≤–µ—Ä—Å—Ç–∫–µ. Frontend –ø–æ–ª—É—á–∞–µ—Ç JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –≥—Ä–∞—Ñ –≤–æ–ø—Ä–æ—Å–æ–≤.

- **Node (–£–∑–µ–ª):** –ï–¥–∏–Ω–∏—Ü–∞ –æ–ø—Ä–æ—Å–∞ (—ç–∫—Ä–∞–Ω).
- **id:** –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∞.
- **type:** –¢–∏–ø —Ä–µ–Ω–¥–µ—Ä–∞ (`single_choice`, `multi_choice`, `scale_1_10`, `body_map`, `text_input`, `info_screen`).
- **question_text:** –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞.
- **options:** –ú–∞—Å—Å–∏–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ (–¥–ª—è choice-—Ç–∏–ø–æ–≤).
- **logic:** –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞. –ü—Ä–∏–º–µ—Ä: `if answer == "option_A" goto "node_5" else goto "node_6"`.
- **required:** –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞).

### 2.2 –õ–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- **Linear & Branching:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ –ª–∏–Ω–µ–π–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, —Ç–∞–∫ –∏ —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤–µ—Ç–≤–ª–µ–Ω–∏—è (Branching Logic) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤.
- **History Stack:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–µ–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –ø—Ä–∏ —Å–ª–æ–∂–Ω–æ–π –Ω–µ–ª–∏–Ω–µ–π–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
- **Auto-save:** –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É–∑–ª—É –æ—Ç–≤–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Redis (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–µ–π—Ç–∞).

---

## 3. –í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –∏ UX (Design System)

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–ª–∂–µ–Ω –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –∏ –≤—ã–∑—ã–≤–∞—Ç—å –¥–æ–≤–µ—Ä–∏–µ.

### 3.1 Layout (–ú–∞–∫–µ—Ç)
- **One Screen ‚Äî One Question:** –ù–∞ —ç–∫—Ä–∞–Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å.
- **Header:** –õ–æ–≥–æ—Ç–∏–ø –∫–ª–∏–Ω–∏–∫–∏ (—Å–ª–µ–≤–∞), –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å/–í—ã—Ö–æ–¥" (—Å–ø—Ä–∞–≤–∞).
- **Progress Bar:** –õ–∏–Ω–µ–π–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–≤–µ—Ä—Ö—É. –î–æ–ª–∂–µ–Ω –æ—Ç—Ä–∞–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∏–ª–∏ "–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π" –ø—Ä–æ–≥—Ä–µ—Å—Å (—á—Ç–æ–±—ã –Ω–µ –¥–µ–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö –≤–µ—Ç–∫–∞—Ö). –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–≤–Ω–∞—è.
- **Footer:** –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ("–ù–∞–∑–∞–¥" ‚Äî –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è, "–î–∞–ª–µ–µ" ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è/CTA). –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" –º–æ–∂–µ—Ç –±—ã—Ç—å disabled –¥–æ –≤—ã–±–æ—Ä–∞ –æ—Ç–≤–µ—Ç–∞.

### 3.2 UI Components
- **Cards:** –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –∫–∞–∫ –∫—Ä—É–ø–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (Card UI) —Å –≤—ã—Å–æ–∫–æ–π –æ–±–ª–∞—Å—Ç—å—é –∫–ª–∏–∫–∞ (min-height: 48px).
- **Typography:** –ö—Ä—É–ø–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (Sans-serif), –≤—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ (WCAG AA compliant).
- **Input Controls:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–≤–æ–¥–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ numeric –¥–ª—è –≤–≤–æ–¥–∞ —Ü–∏—Ñ—Ä –∏ —Ç.–¥.).

### 3.3 –ê–Ω–∏–º–∞—Ü–∏–∏ (Micro-interactions)
- **Slide Transitions:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–î–∞–ª–µ–µ" —Ç–µ–∫—É—â–∏–π —ç–∫—Ä–∞–Ω —É—Ö–æ–¥–∏—Ç –≤–ª–µ–≤–æ (opacity 1 -> 0, x -> -100%), –Ω–æ–≤—ã–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞. –ü—Ä–∏ "–ù–∞–∑–∞–¥" ‚Äî –∏–Ω–≤–µ—Ä—Å–∏—è.
- **Selection Feedback:** –í–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –ø—Ä–∏ —Ç–∞–ø–µ –Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ (scale 0.98 -> 1.0, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –±–æ—Ä–¥–µ—Ä–∞/—Ñ–æ–Ω–∞).

---

## 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24 (Integration Layer)

–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ REST API –∏ Webhooks. –°–∏—Å—Ç–µ–º–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –¥–æ–ª—å—à–µ —Å–µ—Å—Å–∏–∏.

### 4.1 –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Token-based Auth)
- **–í—Ö–æ–¥:** –°—Å—ã–ª–∫–∞ –≤–∏–¥–∞ `https://app.domain.com/?token={JWT}`.
- **JWT Payload:** –°–æ–¥–µ—Ä–∂–∏—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ lead_id (ID —Å–¥–µ–ª–∫–∏/–ª–∏–¥–∞), patient_id (–µ—Å–ª–∏ –µ—Å—Ç—å), expiration_timestamp (—Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–∫–∏).
- **Validation:** Middleware –Ω–∞ Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å —Ç–æ–∫–µ–Ω–∞ –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å 401/403 –∏ —ç–∫—Ä–∞–Ω "–°—Å—ã–ª–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞".

### 4.2 –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö (Data Flow)
1. **Start:** –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞) Frontend –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É Backend –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é (–ò–º—è –ø–∞—Ü–∏–µ–Ω—Ç–∞) –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è.
2. **Finish:** –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø—Ä–æ—Å–∞ Backend:
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –æ—Ç—á–µ—Ç (PDF –∏–ª–∏ Markdown-—Ç–µ–∫—Å—Ç).
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 —á–µ—Ä–µ–∑ –≤—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫ (–º–µ—Ç–æ–¥ `crm.lead.update` –∏–ª–∏ `crm.timeline.comment.add`).
   - –ü–æ–º–µ—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π (invalidate).

---

## 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ Compliance (Security)

–°–æ–±–ª—é–¥–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π 152-–§–ó –∏ GDPR.

### 5.1 –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **Consent Screen:** –ü–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω ‚Äî —Å—Ç—Ä–æ–≥–æ –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ç–µ–∫—Å—Ç–æ–º —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ü–î–Ω –∏ —á–µ–∫–±–æ–∫—Å–æ–º. –ë–µ–∑ –∞–∫—Ü–µ–ø—Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥ –¥–∞–ª—å—à–µ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.
- **Data Minimization:** –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –§–ò–û –≤ –ø—Ä–∏–≤—è–∑–∫–µ –∫ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –¥–∞–Ω–Ω—ã–º –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ (–æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞). –°–≤—è–∑–∫–∞ –∏–¥–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ ID –∏–∑ CRM.

### 5.2 –°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **HTTPS/TLS 1.3:** –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ —à–∏—Ñ—Ä—É–µ—Ç—Å—è.
- **CORS:** –°—Ç—Ä–æ–≥–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ Cross-Origin Resource Sharing. –†–∞–∑—Ä–µ—à–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
- **Rate Limiting:** –ó–∞—â–∏—Ç–∞ API –æ—Ç DDOS –∏ –ø–µ—Ä–µ–±–æ—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤ (Throttling –Ω–∞ —É—Ä–æ–≤–Ω–µ Nginx –∏–ª–∏ FastAPI Middleware).
- **Sanitization:** –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤ (XSS protection).

---

