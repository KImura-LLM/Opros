# Тестовый сценарий для проверки условий перехода

## Что было добавлено:

### 1. Компонент EdgeEditor (редактор связей)
- Модальное окно для настройки условий
- Быстрый выбор вариантов ответа (для вопросов с опциями)
- Ручной ввод условий (Python-подобный синтаксис)
- Чекбокс "Переход по умолчанию"
- Подсказки и примеры использования

### 2. Обновления в store
- `updateEdge` — обновление условия на связи
- Поддержка `isDefault` флага
- Автоматическая анимация связей с условиями

### 3. Визуальные улучшения
- Анимированные стрелки для условных переходов
- Обычные стрелки для переходов по умолчанию
- Подсветка при наведении курсора
- Лейблы на связях

### 4. Интеграция в SurveyEditor
- Обработчик клика на связь (`onEdgeClick`)
- Открытие EdgeEditor при клике
- Закрытие редактора узла при выборе связи

## Как протестировать:

### Базовая проверка:
1. Запустите приложение
2. Откройте редактор опросника
3. Создайте 2-3 вопроса с вариантами ответа
4. Соедините их стрелками (drag & drop от handle)
5. Кликните на стрелку → откроется EdgeEditor
6. Выберите вариант ответа или введите условие
7. Сохраните → стрелка станет анимированной с лейблом

### Проверка ветвления:
1. Создайте вопрос "Испытываете ли вы боль?" с вариантами "Да"/"Нет"
2. Создайте два следующих вопроса:
   - "Опишите характер боли" (для ответа "Да")
   - "Следующий раздел" (для ответа "Нет")
3. Соедините первый вопрос с обоими
4. На первой связи: выберите вариант "Да"
5. На второй связи: поставьте галочку "Переход по умолчанию"
6. Используйте "Предпросмотр" для проверки логики

### Проверка сохранения:
1. Настройте условия на связях
2. Сохраните опросник (Ctrl+S)
3. Обновите страницу
4. Кликните на связи → условия должны сохраниться

## Ожидаемое поведение:

✅ Клик на стрелку открывает модальное окно  
✅ Для вопросов с вариантами показываются кнопки быстрого выбора  
✅ Условие корректно отображается в текстовом поле  
✅ Чекбокс "По умолчанию" очищает условие  
✅ Анимированные стрелки для условных переходов  
✅ Лейблы на стрелках  
✅ Условия сохраняются при сохранении опросника  
✅ Валидация через кнопку "Проверить" учитывает условия  

## Возможные проблемы:

❌ TypeScript ошибки — проверьте импорты EdgeEditor  
❌ Стрелки не кликабельны — проверьте `onEdgeClick` в ReactFlow  
❌ Условия не сохраняются — проверьте метод `updateEdge` в store  
❌ Модальное окно не открывается — проверьте state `selectedEdge`  

## Следующие шаги (опционально):

- [ ] Добавить валидацию синтаксиса условий
- [ ] Добавить автодополнение для условий
- [ ] Визуализация ошибок в условиях
- [ ] Контекстное меню на связях (ПКМ)
- [ ] Копирование условия между связями
